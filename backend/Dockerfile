FROM node:14-alpine

WORKDIR /app

ARG MYSQL_CONNECTION_STRING
ARG AWS_COGNITO_USERPOOL_ID
ENV MYSQL_CONNECTION_STRING=$MYSQL_CONNECTION_STRING
ENV AWS_COGNITO_USERPOOL_ID=$AWS_COGNITO_USERPOOL_ID

COPY package.json package-lock.json ./
RUN npm install

COPY . .

CMD [ "npm", "start" ]